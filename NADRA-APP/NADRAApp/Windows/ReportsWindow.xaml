<Window x:Class="NADRAApp.Windows.ReportsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="NADRA Reports" Height="600" Width="800"
        WindowStartupLocation="CenterScreen">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="NADRA Database Reports" 
                  FontSize="20" FontWeight="Bold" 
                  HorizontalAlignment="Center" Margin="0,0,0,20"/>

        <!-- Report Controls -->
        <GroupBox Grid.Row="1" Header="Report Options" Margin="0,0,0,20">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="35"/>
                    <RowDefinition Height="35"/>
                </Grid.RowDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Content="Report Type:" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="0" Grid.Column="1" x:Name="ReportTypeComboBox" 
                         Margin="5" SelectedIndex="0">
                    <ComboBoxItem Content="All Citizens"/>
                    <ComboBoxItem Content="Citizens by Gender"/>
                    <ComboBoxItem Content="Citizens by Province"/>
                    <ComboBoxItem Content="Citizens by Age Group"/>
                    <ComboBoxItem Content="Registration Statistics"/>
                </ComboBox>

                <Label Grid.Row="0" Grid.Column="2" Content="Date From:" VerticalAlignment="Center"/>
                <DatePicker Grid.Row="0" Grid.Column="3" x:Name="FromDatePicker" Margin="5"/>

                <Button Grid.Row="0" Grid.Column="4" Content="Generate Report" 
                       Click="GenerateReport_Click" 
                       Width="120" Height="30" Margin="5"
                       Background="#4CAF50" Foreground="White" FontWeight="Bold"/>

                <Label Grid.Row="1" Grid.Column="0" Content="Export Format:" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="1" Grid.Column="1" x:Name="ExportFormatComboBox" 
                         Margin="5" SelectedIndex="0">
                    <ComboBoxItem Content="PDF"/>
                    <ComboBoxItem Content="Excel"/>
                    <ComboBoxItem Content="CSV"/>
                </ComboBox>

                <Label Grid.Row="1" Grid.Column="2" Content="Date To:" VerticalAlignment="Center"/>
                <DatePicker Grid.Row="1" Grid.Column="3" x:Name="ToDatePicker" Margin="5"/>

                <Button Grid.Row="1" Grid.Column="4" Content="Export Report" 
                       Click="ExportReport_Click" 
                       Width="120" Height="30" Margin="5"
                       Background="#2196F3" Foreground="White" FontWeight="Bold"/>
            </Grid>
        </GroupBox>

        <!-- Report Display -->
        <TabControl Grid.Row="2">
            <TabItem Header="Report Data">
                <DataGrid x:Name="ReportDataGrid"
                         AutoGenerateColumns="True"
                         CanUserAddRows="False"
                         CanUserDeleteRows="False"
                         GridLinesVisibility="Horizontal"
                         HeadersVisibility="Column"
                         SelectionMode="Single"/>
            </TabItem>
            
            <TabItem Header="Statistics">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <GroupBox Grid.Column="0" Header="Summary Statistics" Margin="5">
                        <StackPanel Margin="10">
                            <TextBlock x:Name="TotalCitizensText" Text="Total Citizens: 0" 
                                      FontSize="14" Margin="0,5"/>
                            <TextBlock x:Name="MaleCitizensText" Text="Male Citizens: 0" 
                                      FontSize="14" Margin="0,5"/>
                            <TextBlock x:Name="FemaleCitizensText" Text="Female Citizens: 0" 
                                      FontSize="14" Margin="0,5"/>
                            <TextBlock x:Name="AverageAgeText" Text="Average Age: 0" 
                                      FontSize="14" Margin="0,5"/>
                            <TextBlock x:Name="NewRegistrationsText" Text="New Registrations (This Month): 0" 
                                      FontSize="14" Margin="0,5"/>
                        </StackPanel>
                    </GroupBox>

                    <GroupBox Grid.Column="1" Header="Province Distribution" Margin="5">
                        <ListBox x:Name="ProvinceStatsListBox" Margin="10">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Province}" Width="100"/>
                                        <TextBlock Text=": "/>
                                        <TextBlock Text="{Binding Count}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </GroupBox>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <StatusBar Grid.Row="3" Background="#F5F5F5" Margin="0,10,0,0">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="Ready to generate reports"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <ProgressBar x:Name="ReportProgressBar" 
                           Width="200" Height="16"
                           Visibility="Collapsed"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>